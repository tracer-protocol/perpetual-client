(window.webpackJsonp=window.webpackJsonp||[]).push([["load-chart-dialog"],{"8h+f":function(e,t,n){e.exports={container:"container-1NQ91aze",list:"list-1NQ91aze",overlayScrollWrap:"overlayScrollWrap-1NQ91aze",scroll:"scroll-1NQ91aze"}},EgWQ:function(e,t,n){"use strict";n.r(t);var i=n("q1tI"),o=n.n(i),r=n("i8i4"),a=n("Eyy1"),c=n("YFKU"),l=n("Vdly"),s=n("qFKp"),d=n("g89m"),u=n("mrSG"),m=n("TSYQ"),f=n.n(m),h=n("9dlw"),b=n("Iksw"),g=n("Iivm"),v=n("e5nO"),O=n("UjII"),S=n("HjiN");function j(e){const{sortDirection:t,children:n}=e,r=Object(u.a)(e,["sortDirection","children"]),a=Object(i.useRef)(null),[c,l]=Object(i.useState)(!1);return o.a.createElement("div",Object.assign({},r,{ref:a,className:m(S.sortButton,"apply-common-tooltip","common-tooltip-vertical"),onClick:function(){l(!c)}}),o.a.createElement(g.a,{className:S.icon,icon:0===t?v:O}),o.a.createElement(h.a,{doNotCloseOn:a.current,isOpened:c,onClose:()=>{l(!1)},position:Object(b.e)(a.current,{verticalMargin:-35,verticalAttachEdge:0})},n))}var p=n("N5tr"),y=n("H2qI");function w(e){const{label:t,listSortField:n,itemSortField:o,listSortDirection:r,itemSortDirection:a,onClick:c,className:l}=e,s=Object(u.a)(e,["label","listSortField","itemSortField","listSortDirection","itemSortDirection","onClick","className"]),d=o===n&&a===r;return i.createElement(p.b,Object.assign({},s,{className:m(y.container,l),label:i.createElement("div",{className:y.labelWrap},i.createElement(g.a,{className:y.icon,icon:0===a?v:O}),i.createElement("span",{className:y.text},t)),isActive:d,onClick:function(){c(o,a)},"data-active":d.toString(),"data-sort-field":o,"data-sort-direction":0===a?"asc":"desc"}))}var E=n("QHWU"),C=n("IePd");function N(e){const{children:t,className:n}=e;return o.a.createElement("div",{className:f()(C.container,n)},t)}function x(e){const{title:t}=e;return o.a.createElement("div",{className:C.title},t)}var F=n("ivNn");var D=n("iR1w"),k=n("cvc5"),I=n.n(k),R=n("Ialn"),M=n("9S1y"),T=n("n9z6");var L=n("0lNN"),A=n("8h+f");function K(e){const{className:t,onScroll:n,onTouchStart:r,reference:a,children:c,scrollbar:l}=e,d=Object(u.a)(e,["className","onScroll","onTouchStart","reference","children","scrollbar"]),[m,h]=Object(M.a)(),[b,g,v,O]=Object(T.a)();return Object(i.useEffect)(()=>{const e=()=>{};return s.isFF?(document.addEventListener("wheel",()=>e),()=>{document.removeEventListener("wheel",e)}):e},[]),o.a.createElement(I.a,{onMeasure:m},o.a.createElement("div",Object.assign({},"overlay"===l&&g,{className:f()(A.container,t),onTouchStart:r,onScroll:n}),"overlay"===l&&o.a.createElement(L.a,Object.assign({},b,{className:A.overlayScrollWrap})),o.a.createElement(D.a,Object.assign({ref:a,className:f()("native"===l?A.scroll:A.list),outerRef:"overlay"===l?v:void 0,onItemsRendered:O,layout:"vertical",width:"100%",height:(null==h?void 0:h.height)||0,children:c,direction:Object(R.isRtl)()?"rtl":"ltr"},d))))}var W=n("mNbo");var P=n("gM3K"),Q=n("pPtI"),q=n("+EG+"),_=n("fZEr");var B=n("gQ5K"),J=n("4kQX"),V=n("1LIl"),z=n("H9Gg"),U=n("iJYK")
;const H=Object(c.t)("Do you really want to delete Chart Layout '{0}' ?");const Y=new B.DateFormatter("dd-MM-yyyy"),X=new J.TimeFormatter("%h:%m");function G(e){const{chart:t,chartWidgetCollection:n,trackEvent:r,localFavorites:a,onClose:c,searchString:l,onClickRemove:s,onRemoveCanceled:d,isSelected:u}=e,[m,h]=Object(i.useState)(()=>t.active()),b=function(e){const t=e.chartId?`/chart/${e.chartId}/`:"/chart/",n=new URL(t,location.href);return e.symbol&&n.searchParams.append("symbol",e.symbol),e.interval&&n.searchParams.append("interval",e.interval),e.style&&n.searchParams.append("style",e.style),Object(W.b)(n.href)}({chartId:t.url}),g=Object(i.useContext)(q.b),v=Object(i.useMemo)(()=>new Date(1e3*t.modified),[t]),O=Object(i.useMemo)(()=>Object(z.a)(l),[l]),S=f()(U.highlight,m&&U.active);return Object(i.useEffect)(()=>(n&&n.metaInfo.id.subscribe(p),()=>{n&&n.metaInfo.id.unsubscribe(p)}),[]),o.a.createElement(P.a,{url:b,title:o.a.createElement(V.a,{className:S,queryString:l,rules:O,text:t.title}),subtitle:o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,{className:S,queryString:l,rules:O,text:t.description})," ","(",Y.format(v).replace(/-/g,".")," ",X.formatLocal(v),")"),onClick:function(e){0;t.openAction(),!1},onClickFavorite:function(){0;const e=Object.assign({},a);e[t.id]?delete e[t.id]:e[t.id]=!0;t.favoriteAction(e)},onClickRemove:function(){!function(e,t,n,i){Object(_.a)({text:e,onConfirm:({dialogClose:e})=>{t(),e()},onClose:()=>{n()}},i)}(H.format(t.title),j,d,g)},isFavorite:Boolean(a[t.id]),isActive:m,isSelected:u,"data-name":"load-chart-dialog-item"});function j(){t.deleteAction().then(()=>s(t.id))}function p(e){h(t.id===e)}}var Z=n("tWVy"),$=n("/3z9");var ee=n("YCUu");const te={sortField:"modified",sortDirection:1},ne=function(e){const{paddingTop:t=0,paddingBottom:n=0}=e;return Object(i.forwardRef)((e,i)=>{var{style:r}=e,a=Object(u.a)(e,["style"]);const{height:c=0}=r;return o.a.createElement("div",Object.assign({ref:i,style:Object.assign(Object.assign({},r),{height:(Object(F.isNumber)(c)?c:parseFloat(c))+t+n+"px"})},a))})}({paddingBottom:6});function ie(e){let t;try{t=Object(Q.getTranslatedResolution)(e)}catch(n){t=e}return t}function oe(e){const{charts:t,onClose:n,favoriteChartsService:r,chartWidgetCollection:c}=e,[u,m]=Object(i.useState)(""),[f,h]=Object(i.useState)(u),[b,g]=Object(i.useState)([]),v=Object(i.useRef)(null),[O,S]=Object(i.useState)(()=>r.get()),[p,y]=Object(i.useState)(()=>l.getJSON("loadChartDialog.viewState",te)),C=Object(i.useRef)(null),F=Object(i.useRef)(null),D=Object(i.useMemo)(()=>t.map(e=>Object.assign(Object.assign({},e),{description:`${e.symbol}, ${ie(e.interval)}`})),[t]);Object(i.useEffect)(()=>{s.CheckMobile.any()||Object(a.ensureNotNull)(C.current).focus()},[]);const k=Object(i.useRef)();Object(i.useEffect)(()=>(k.current=setTimeout(()=>{m(f)},300),()=>{clearTimeout(k.current)}),[f]),Object(i.useEffect)(()=>(r.getOnChange().subscribe(null,q),()=>{r.getOnChange().unsubscribe(null,q)}),[]);const I=Object(i.useCallback)(()=>!0,[]),R=Object(i.useMemo)(()=>{return Object(z.c)({
data:D.filter(e=>!b.includes(e.id)).sort((e=p.sortDirection,(t,n)=>{if(O[t.id]&&!O[n.id])return-1;if(!O[t.id]&&O[n.id])return 1;const i=0===e?1:-1;return"modified"===p.sortField?i*(t.modified-n.modified):i*t.title.localeCompare(n.title)})),rules:Object(z.a)(u),queryString:u,primaryKey:"title",secondaryKey:"description"});var e},[u,p,b,O]),{selectedItemIndex:M,setSelectedItemIndex:T,handleKeyboardSelection:L}=function(e,t,n){const[o,r]=Object(i.useState)(-1);return Object(i.useEffect)(()=>{var e;-1!==o&&(null===(e=n.current)||void 0===e||e.scrollToItem(o))},[o]),{selectedItemIndex:o,setSelectedItemIndex:r,handleKeyboardSelection:function(n){switch(Object($.hashFromEvent)(n)){case 40:if(o===e-1)return;r(o+1);break;case 38:if(0===o)return;if(-1===o)return void r(o+1);r(o-1);break;case 13:t(n)}}}}(R.length,(function(e){const t=R[M];if(-1===M||!t)return;0;t.openAction(),!1}),F);return o.a.createElement(d.a,{ref:v,onClose:n,onClickOutside:n,onKeyDown:L,isOpened:!0,className:ee.dialog,title:window.t("Load layout"),dataName:"load-layout-dialog",render:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{reference:C,onChange:W,placeholder:window.t("Search")}),o.a.createElement(N,null,o.a.createElement(x,{title:window.t("Layout name")}),o.a.createElement(j,{sortDirection:p.sortDirection,title:window.t("Sort by layout name, date changed"),"data-name":"load-chart-dialog-sort-button"},o.a.createElement(w,{label:window.t("Layout name (A to Z)"),listSortField:p.sortField,itemSortField:"title",listSortDirection:p.sortDirection,itemSortDirection:0,onClick:B,"data-name":"load-chart-dialog-sort-menu-item"}),o.a.createElement(w,{label:window.t("Layout name (Z to A)"),listSortField:p.sortField,itemSortField:"title",listSortDirection:p.sortDirection,itemSortDirection:1,onClick:B,"data-name":"load-chart-dialog-sort-menu-item"}),o.a.createElement(w,{label:window.t("Date modified (oldest first)"),listSortField:p.sortField,itemSortField:"modified",listSortDirection:p.sortDirection,itemSortDirection:0,onClick:B,"data-name":"load-chart-dialog-sort-menu-item"}),o.a.createElement(w,{label:window.t("Date modified (newest first)"),listSortField:p.sortField,itemSortField:"modified",listSortDirection:p.sortDirection,itemSortDirection:1,onClick:B,"data-name":"load-chart-dialog-sort-menu-item"}))),o.a.createElement(K,{scrollbar:"native",reference:F,itemCount:R.length,itemSize:52,className:ee.contentList,onScroll:A,innerElementType:ne,itemKey:e=>(O[R[e].id]?"f_":"")+R[e].id,children:({style:e,index:t})=>o.a.createElement("div",{style:e},o.a.createElement(G,{chart:R[t],onClose:n,chartWidgetCollection:c,trackEvent:P,onRemoveCanceled:_,localFavorites:O,searchString:u,onClickRemove:Q,isSelected:t===M}))}))},forceCloseOnEsc:I});function A(){Z.a.fire()}function W(e){const t=e.currentTarget.value;h(t),T(-1)}function P(e){0}function Q(e){g([e,...b])}function q(e){S(e)}function _(){Object(a.ensureNotNull)(v.current).focus()}function B(e,t){const n={sortField:e,sortDirection:t};y(n),
l.setValue("loadChartDialog.viewState",JSON.stringify(n),{forceFlush:!0}),P()}}var re=n("sQaR");n.d(t,"LoadChartDialogRenderer",(function(){return ae}));class ae extends re.a{constructor(e){super(),this._options=e}show(){r.render(i.createElement(oe,Object.assign({},this._options,{onClose:()=>this.hide()})),this._container),this._setVisibility(!0)}hide(){r.unmountComponentAtNode(this._container),this._setVisibility(!1)}}},H2qI:function(e,t,n){e.exports={container:"container-xPtOXn4t",labelWrap:"labelWrap-xPtOXn4t",icon:"icon-xPtOXn4t",text:"text-xPtOXn4t"}},HjiN:function(e,t,n){e.exports={sortButton:"sortButton-Srpxcu6T",icon:"icon-Srpxcu6T"}},IePd:function(e,t,n){e.exports={container:"container-30_lleAw",title:"title-30_lleAw"}},UjII:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M19.5 18.5h-3M21.5 13.5h-5M23.5 8.5h-7M8.5 7v13.5M4.5 16.5l4 4 4-4"/></svg>'},YCUu:function(e,t,n){e.exports={dialog:"dialog-1xjtlTJV",contentList:"contentList-1xjtlTJV"}},e5nO:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M19.5 18.5h-3M21.5 13.5h-5M23.5 8.5h-7M8.5 20.5V7M12.5 11l-4-4-4 4"/></svg>'},iJYK:function(e,t,n){e.exports={highlight:"highlight-1aROqc2m",active:"active-1aROqc2m"}}}]);